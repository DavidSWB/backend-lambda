{"version":3,"file":"node-build.mjs","sources":["../../server/db.ts","../../server/routes/auth.ts","../../server/middleware/auth.ts","../../server/routes/clientes.ts","../../server/routes/mascotas.ts","../../server/routes/servicios.ts","../../server/utils/pdf.ts","../../server/routes/cobros.ts","../../server/utils/mail.ts","../../server/routes/recordatorios.ts","../../server/routes/reports.ts","../../server/routes/test-mail.ts","../../server/index.ts","../../server/node-build.ts"],"sourcesContent":["import { MongoClient, Db } from \"mongodb\";\nimport dotenv from \"dotenv\";\n\ndotenv.config();\n\nconst uri = process.env.MONGO_URI;\nif (!uri) throw new Error(\"MONGO_URI not configured\");\n\nlet client: MongoClient | null = null;\nlet db: Db | null = null;\n\nexport async function connectDB() {\n  if (!db) {\n    client = new MongoClient(uri);\n    await client.connect();\n    db = client.db(process.env.DB_NAME || \"manolos_gestion\");\n    console.log(\"Connected to MongoDB\", db.databaseName);\n  }\n  return db;\n}\n\nexport function getDb() {\n  if (!db) throw new Error(\"Database not connected. Call connectDB first.\");\n  return db;\n}\n\nexport async function closeDB() {\n  await client.close();\n  db = null;\n}\n","import { Router } from \"express\";\nimport { z } from \"zod\";\nimport { getDb } from \"../db\";\nimport bcrypt from \"bcryptjs\";\nimport jwt from \"jsonwebtoken\";\n\nconst router = Router();\n\nconst registerSchema = z.object({ nombre: z.string(), correo: z.string().email(), password: z.string().min(4) });\nconst loginSchema = z.object({ correo: z.string().email(), password: z.string() });\n\nrouter.post(\"/register\", async (req, res) => {\n  try {\n    const parsed = registerSchema.parse(req.body);\n    const db = getDb();\n    const exists = await db.collection(\"usuarios\").findOne({ correo: parsed.correo });\n    if (exists) return res.status(400).json({ message: \"Correo ya registrado\" });\n    const hash = await bcrypt.hash(parsed.password, 10);\n    const result = await db.collection(\"usuarios\").insertOne({ nombre: parsed.nombre, correo: parsed.correo, passwordHash: hash, rol: \"admin\", creadoEn: new Date() });\n    res.json({ id: result.insertedId });\n  } catch (e: any) {\n    res.status(400).json({ error: e.message });\n  }\n});\n\nrouter.post(\"/login\", async (req, res) => {\n  try {\n    const parsed = loginSchema.parse(req.body);\n    const db = getDb();\n    const user = await db.collection(\"usuarios\").findOne({ correo: parsed.correo });\n    if (!user) return res.status(401).json({ message: \"Credenciales invÃ¡lidas\" });\n    const ok = await bcrypt.compare(parsed.password, user.passwordHash || \"\");\n    if (!ok) return res.status(401).json({ message: \"Credenciales invÃ¡lidas\" });\n    const token = jwt.sign({ sub: String(user._id), correo: user.correo, nombre: user.nombre, rol: user.rol }, process.env.JWT_SECRET || \"dev\", { expiresIn: process.env.JWT_EXPIRES_IN || \"7d\" });\n    res.json({ token });\n  } catch (e: any) {\n    res.status(400).json({ error: e.message });\n  }\n});\n\nexport default router;\n","import { Request, Response, NextFunction } from \"express\";\nimport jwt from \"jsonwebtoken\";\n\nexport function requireAuth(req: Request, res: Response, next: NextFunction) {\n  // Skip authentication and set a default admin user\n  (req as any).user = {\n    sub: \"6902a1d4ade8c9d8fc967adc\",\n    nombre: \"Prueba\",\n    correo: \"admin@gmail.com\",\n    rol: \"admin\"\n  };\n  next();\n}\n","import { Router } from \"express\";\nimport { z } from \"zod\";\nimport { getDb } from \"../db\";\nimport { requireAuth } from \"../middleware/auth\";\nimport { ObjectId } from 'mongodb';\n\nconst router = Router();\n\nconst clienteSchema = z.object({ nombre: z.string(), direccion: z.string().optional(), correo: z.string().email(), telefono: z.string() });\n\nrouter.use(requireAuth);\n\nrouter.get(\"/\", async (req, res) => {\n  const db = getDb();\n  const items = await db.collection(\"clientes\").find().toArray();\n  res.json(items);\n});\n\nrouter.post(\"/\", async (req, res) => {\n  try {\n    const parsed = clienteSchema.parse(req.body);\n    const db = getDb();\n    const result = await db.collection(\"clientes\").insertOne({ ...parsed, creadoEn: new Date() });\n    res.json({ id: result.insertedId });\n  } catch (e: any) {\n    res.status(400).json({ error: e.message });\n  }\n});\n\nrouter.put(\"/:id\", async (req, res) => {\n  const db = getDb();\n  const id = req.params.id;\n  await db.collection(\"clientes\").updateOne({ _id: new ObjectId(id) }, { $set: req.body });\n  res.json({ ok: true });\n});\n\nrouter.delete(\"/:id\", async (req, res) => {\n  try {\n    const db = getDb();\n    const result = await db.collection('clientes').deleteOne({ \n      _id: new ObjectId(req.params.id) \n    });\n    \n    if (result.deletedCount === 0) {\n      return res.status(404).json({ message: 'Cliente no encontrado' });\n    }\n    \n    res.json({ message: 'Cliente eliminado correctamente' });\n  } catch (err) {\n    console.error('Error eliminando cliente:', err);\n    res.status(500).json({ message: 'Error interno del servidor' });\n  }\n});\n\nexport default router;\n","import { Router } from \"express\";\nimport { z } from \"zod\";\nimport { getDb } from \"../db\";\nimport { requireAuth } from \"../middleware/auth\";\nimport { ObjectId } from \"mongodb\";\n\nconst router = Router();\n\nconst mascotaSchema = z.object({ clienteId: z.string(), nombre: z.string(), especie: z.string(), raza: z.string().optional(), edad: z.number().optional(), peso: z.number().optional() });\n\nrouter.use(requireAuth);\n\nrouter.get(\"/\", async (req, res) => {\n  const db = getDb();\n  const items = await db.collection(\"mascotas\").find().toArray();\n  res.json(items);\n});\n\nrouter.post(\"/\", async (req, res) => {\n  try {\n    const parsed = mascotaSchema.parse(req.body);\n    const db = getDb();\n    // Check cliente exists\n    const cliente = await db.collection(\"clientes\").findOne({ _id: new ObjectId(parsed.clienteId) });\n    if (!cliente) return res.status(400).json({ error: \"Cliente no existe\" });\n    // Enforce max 7 mascotas per cliente\n    const count = await db.collection(\"mascotas\").countDocuments({ clienteId: parsed.clienteId });\n    if (count >= 7) return res.status(400).json({ error: \"El cliente ya tiene el mÃ¡ximo de 7 mascotas\" });\n    const result = await db.collection(\"mascotas\").insertOne({ ...parsed, creadoEn: new Date() });\n    res.json({ id: result.insertedId });\n  } catch (e: any) {\n    res.status(400).json({ error: e.message });\n  }\n});\n\nrouter.put(\"/:id\", async (req, res) => {\n  const db = getDb();\n  const id = req.params.id;\n  await db.collection(\"mascotas\").updateOne({ _id: new ObjectId(id) }, { $set: req.body });\n  res.json({ ok: true });\n});\n\nrouter.delete(\"/:id\", async (req, res) => {\n  const db = getDb();\n  const id = req.params.id;\n  await db.collection(\"mascotas\").deleteOne({ _id: new ObjectId(id) });\n  res.json({ ok: true });\n});\n\nexport default router;\n","import { Router } from \"express\";\nimport { z } from \"zod\";\nimport { getDb } from \"../db\";\nimport { requireAuth } from \"../middleware/auth\";\nimport { ObjectId } from \"mongodb\";\n\nconst router = Router();\n\nconst servicioSchema = z.object({ nombre: z.string(), descripcion: z.string().optional(), tarifa: z.number(), duracion: z.string().optional(), activo: z.boolean().optional() });\n\nrouter.use(requireAuth);\n\nrouter.get(\"/\", async (req, res) => {\n  const db = getDb();\n  const items = await db.collection(\"servicios\").find().toArray();\n  res.json(items);\n});\n\nrouter.post(\"/\", async (req, res) => {\n  try {\n    const parsed = servicioSchema.parse(req.body);\n    const db = getDb();\n    const result = await db.collection(\"servicios\").insertOne({ ...parsed, creadoEn: new Date() });\n    res.json({ id: result.insertedId });\n  } catch (e: any) {\n    res.status(400).json({ error: e.message });\n  }\n});\n\nrouter.put(\"/:id\", async (req, res) => {\n  const db = getDb();\n  const id = req.params.id;\n  await db.collection(\"servicios\").updateOne({ _id: new ObjectId(id) }, { $set: req.body });\n  res.json({ ok: true });\n});\n\nrouter.delete(\"/:id\", async (req, res) => {\n  const db = getDb();\n  const id = req.params.id;\n  await db.collection(\"servicios\").deleteOne({ _id: new ObjectId(id) });\n  res.json({ ok: true });\n});\n\nexport default router;\n","import PDFDocument from \"pdfkit\";\n\nexport function invoicePdfBuffer({ cliente, servicio, fecha, total }: { cliente: string; servicio: string; fecha: string; total: number }) {\n  const doc = new PDFDocument({ size: \"A4\", margin: 50 });\n  const chunks: Buffer[] = [];\n  doc.on(\"data\", (c: Buffer) => chunks.push(c));\n  doc.on(\"end\", () => {});\n\n  doc.fontSize(20).text(\"Comprobante - Manolo's GestiÃ³n\", { align: \"center\" });\n  doc.moveDown();\n  doc.fontSize(12).text(`Cliente: ${cliente}`);\n  doc.text(`Servicio: ${servicio}`);\n  doc.text(`Fecha: ${fecha}`);\n  doc.moveDown();\n  doc.fontSize(14).text(`Total: ${new Intl.NumberFormat(\"es-CO\", { style: \"currency\", currency: \"COP\" }).format(total)}`);\n\n  doc.end();\n\n  return new Promise<Buffer>((resolve) => {\n    doc.on(\"end\", () => resolve(Buffer.concat(chunks)));\n  });\n}\n","import { Router } from \"express\";\nimport { z } from \"zod\";\nimport { getDb } from \"../db\";\nimport { requireAuth } from \"../middleware/auth\";\nimport { invoicePdfBuffer } from \"../utils/pdf\";\nimport { ObjectId } from \"mongodb\";\n\nconst router = Router();\n\nconst cobroSchema = z.object({ clienteId: z.string(), servicioId: z.string(), fecha: z.string().optional(), cantidad: z.number().optional().default(1), montoUnitario: z.number(), estado: z.enum([\"pendiente\", \"pagado\", \"vencido\"]).optional().default(\"pendiente\") });\n\nrouter.use(requireAuth);\n\nrouter.get(\"/\", async (req, res) => {\n  const db = getDb();\n  const items = await db.collection(\"cobros\").find().toArray();\n  res.json(items);\n});\n\nrouter.post(\"/\", async (req, res) => {\n  try {\n    const parsed = cobroSchema.parse(req.body);\n    const db = getDb();\n    const result = await db.collection(\"cobros\").insertOne({ ...parsed, fecha: parsed.fecha || new Date().toISOString(), creadoEn: new Date() });\n    res.json({ id: result.insertedId });\n  } catch (e: any) {\n    res.status(400).json({ error: e.message });\n  }\n});\n\nrouter.put(\"/:id/estado\", async (req, res) => {\n  const db = getDb();\n  const id = req.params.id;\n  const estado = req.body.estado;\n  await db.collection(\"cobros\").updateOne({ _id: new ObjectId(id) }, { $set: { estado } });\n  res.json({ ok: true });\n});\n\nrouter.get(\"/:id/comprobante\", async (req, res) => {\n  const db = getDb();\n  const id = req.params.id;\n  const c = await db.collection(\"cobros\").findOne({ _id: new ObjectId(id) });\n  if (!c) return res.status(404).json({ error: \"No encontrado\" });\n  const cliente = await db.collection(\"clientes\").findOne({ _id: new ObjectId(c.clienteId) });\n  const servicio = await db.collection(\"servicios\").findOne({ _id: new ObjectId(c.servicioId) });\n  const total = c.montoUnitario * (c.cantidad || 1);\n  const buffer = await invoicePdfBuffer({ cliente: cliente?.nombre || \"-\", servicio: servicio?.nombre || \"-\", fecha: c.fecha, total });\n  res.setHeader(\"Content-Type\", \"application/pdf\");\n  res.setHeader(\"Content-Disposition\", `attachment; filename=comprobante_${id}.pdf`);\n  res.send(buffer);\n});\n\nrouter.delete(\"/:id\", async (req, res) => {\n  try {\n    const db = getDb();\n    const id = req.params.id;\n    const result = await db.collection(\"cobros\").deleteOne({ _id: new ObjectId(id) });\n    if (result.deletedCount === 0) {\n      return res.status(404).json({ error: \"Cobro no encontrado\" });\n    }\n    res.json({ ok: true });\n  } catch (e: any) {\n    res.status(500).json({ error: e.message });\n  }\n});\n\nexport default router;\n","import nodemailer from \"nodemailer\";\n\nconst transporter = nodemailer.createTransport({\n  host: process.env.SMTP_HOST,\n  port: Number(process.env.SMTP_PORT),\n  secure: false,\n  auth: {\n    user: process.env.SMTP_USER,\n    pass: process.env.SMTP_PASS,\n  },\n});\n\nexport async function verifyConnection() {\n  try {\n    await transporter.verify();\n    console.log(\"SMTP connection verified successfully\");\n    return true;\n  } catch (error) {\n    console.error(\"SMTP connection failed:\", error);\n    throw error;\n  }\n}\n\nexport async function sendMail(to: string, subject: string, text: string, html?: string) {\n  const mailOptions = {\n    from: process.env.SMTP_FROM,\n    to,\n    subject,\n    text,\n    html: html || text\n  };\n\n  try {\n    const info = await transporter.sendMail(mailOptions);\n    console.log(\"Email sent:\", info.messageId);\n    return info;\n  } catch (error) {\n    console.error(\"Error sending email:\", error);\n    throw error;\n  }\n}\n","import { Router } from \"express\";\nimport { z } from \"zod\";\nimport { getDb } from \"../db\";\nimport { requireAuth } from \"../middleware/auth\";\nimport { sendMail } from \"../utils/mail\";\nimport { ObjectId } from \"mongodb\";\n\nconst router = Router();\n\nconst recSchema = z.object({ \n  clienteId: z.string(), \n  medio: z.enum([\"WhatsApp\", \"Email\"]), \n  fecha: z.string().optional(), \n  asunto: z.string().optional(),\n  mensaje: z.string().optional()\n});\n\nrouter.use(requireAuth);\n\nrouter.get(\"/\", async (req, res) => {\n  const db = getDb();\n  const items = await db.collection(\"recordatorios\").find().toArray();\n  res.json(items);\n});\n\nrouter.post(\"/\", async (req, res) => {\n  try {\n    console.log(\"POST /api/recordatorios body:\", req.body);\n\n    // validar con zod y devolver errores legibles\n    const parsed = recSchema.safeParse(req.body);\n    if (!parsed.success) {\n      return res.status(400).json({ message: \"Payload invÃ¡lido\", details: parsed.error.errors });\n    }\n\n    const db = getDb();\n    const { clienteId, medio, fecha, asunto, mensaje } = parsed.data;\n    const cliente = await db.collection(\"clientes\").findOne({ _id: new ObjectId(clienteId) });\n    if (!cliente) {\n      return res.status(400).json({ message: \"Cliente no encontrado\" });\n    }\n\n    const now = new Date().toISOString();\n    const doc = { \n      clienteId, \n      medio, \n      fecha: fecha || now, \n      estado: \"pendiente\", \n      asunto: asunto || \"Recordatorio de Manolo's GestiÃ³n\",\n      mensaje: mensaje || \"Hola, este es un recordatorio\"\n    };\n    const result = await db.collection(\"recordatorios\").insertOne({ ...doc, creadoEn: new Date() });\n\n    if (medio === \"Email\") {\n      try {\n        await sendMail(\n          cliente.correo || \"\", \n          doc.asunto,\n          doc.mensaje\n        );\n        await db.collection(\"recordatorios\").updateOne({ _id: result.insertedId }, { $set: { estado: \"enviado\" } });\n      } catch (e) {\n        await db.collection(\"recordatorios\").updateOne({ _id: result.insertedId }, { $set: { estado: \"fallo\" } });\n      }\n    }\n\n    res.status(201).json({ id: result.insertedId });\n  } catch (e: any) {\n    console.error(e);\n    res.status(500).json({ error: e.message || \"Error interno\" });\n  }\n});\n\nexport default router;\n","import { Router } from \"express\";\nimport { getDb } from \"../db\";\nimport { requireAuth } from \"../middleware/auth\";\nimport { ObjectId } from \"mongodb\";\n\nconst router = Router();\n\nrouter.use(requireAuth);\n\nrouter.get(\"/csv\", async (req, res) => {\n  const db = getDb();\n  const { from, to } = req.query;\n  const filter: any = {};\n  if (from) filter.fecha = { $gte: new Date(String(from)) };\n  if (to) filter.fecha = { ...(filter.fecha || {}), $lte: new Date(String(to)) };\n  const rows = await db.collection(\"cobros\").find(filter).toArray();\n  const header = \"Cliente,Servicio,Fecha,Monto\";\n  const lines = [header];\n  for (const r of rows) {\n    const cliente = await db.collection(\"clientes\").findOne({ _id: new ObjectId(r.clienteId) });\n    const servicio = await db.collection(\"servicios\").findOne({ _id: new ObjectId(r.servicioId) });\n    lines.push(`${cliente?.nombre || \"-\"},${servicio?.nombre || \"-\"},${r.fecha},${r.montoUnitario * (r.cantidad || 1)}`);\n  }\n  res.setHeader(\"Content-Type\", \"text/csv\");\n  res.send(lines.join(\"\\n\"));\n});\n\nexport default router;\n","import { Router } from \"express\";\nimport { sendMail, verifyConnection } from \"../utils/mail\";\n\nconst router = Router();\n\nrouter.get(\"/verify-smtp\", async (req, res) => {\n  try {\n    await verifyConnection();\n    res.json({ ok: true, message: \"SMTP connection verified\" });\n  } catch (error: any) {\n    res.status(500).json({ ok: false, error: error.message });\n  }\n});\n\nrouter.get(\"/test-email\", async (req, res) => {\n  const { to } = req.query;\n\n  if (!to) {\n    return res.status(400).json({ ok: false, error: \"Email recipient required\" });\n  }\n\n  try {\n    const info = await sendMail(\n      to as string,\n      \"Test Email\",\n      \"This is a test email from your application\"\n    );\n    res.json({ ok: true, messageId: info.messageId });\n  } catch (error: any) {\n    res.status(500).json({ ok: false, error: error.message });\n  }\n});\n\nexport default router;","import express from \"express\";\nimport cors from \"cors\";\nimport dotenv from \"dotenv\";\nimport { connectDB } from \"./db\";\nimport authRouter from \"./routes/auth\";\nimport clientesRouter from \"./routes/clientes\";\nimport mascotasRouter from \"./routes/mascotas\";\nimport serviciosRouter from \"./routes/servicios\";\nimport cobrosRouter from \"./routes/cobros\";\nimport recordatoriosRouter from \"./routes/recordatorios\";\nimport reportsRouter from \"./routes/reports\";\nimport testMailRouter from \"./routes/test-mail\";\n\ndotenv.config();\n\nfunction setupApp() {\n  const app = express();\n  app.use(cors());\n  app.use(express.json());\n\n  app.use(\"/api/auth\", authRouter);\n  app.use(\"/api/clientes\", clientesRouter);\n  app.use(\"/api/mascotas\", mascotasRouter);\n  app.use(\"/api/servicios\", serviciosRouter);\n  app.use(\"/api/cobros\", cobrosRouter);\n  app.use(\"/api/recordatorios\", recordatoriosRouter);\n  app.use(\"/api/reports\", reportsRouter);\n  app.use(\"/api\", testMailRouter);\n\n  app.get(\"/api/ping\", (req, res) => res.json({ message: \"pong\" }));\n\n  app.get(\"/api/seed\", async (req, res) => {\n    try {\n      const db = await connectDB();\n      // seed sample data\n      const clientes = [\n        { nombre: \"Laura Rojas\", correo: \"laura@correo.com\", telefono: \"3115551234\", creadoEn: new Date() },\n        { nombre: \"Carlos PÃ©rez\", correo: \"carlos@correo.com\", telefono: \"3102229876\", creadoEn: new Date() },\n      ];\n      const res1 = await db.collection(\"clientes\").insertMany(clientes as any);\n\n      const mascotas = [\n        { clienteId: res1.insertedIds[\"0\"], nombre: \"Luna\", especie: \"Perro\", raza: \"Labrador\", creadoEn: new Date() },\n        { clienteId: res1.insertedIds[\"1\"], nombre: \"Michi\", especie: \"Gato\", raza: \"Siames\", creadoEn: new Date() },\n      ];\n      await db.collection(\"mascotas\").insertMany(mascotas as any);\n\n      const servicios = [\n        { nombre: \"Paseo diario\", tarifa: 15000, duracion: \"1 hora\", activo: true, creadoEn: new Date() },\n        { nombre: \"BaÃ±o y corte\", tarifa: 25000, duracion: \"45 min\", activo: true, creadoEn: new Date() },\n      ];\n      const res3 = await db.collection(\"servicios\").insertMany(servicios as any);\n\n      const cobros = [\n        { clienteId: res1.insertedIds[\"0\"], servicioId: res3.insertedIds[\"0\"], fecha: new Date().toISOString(), cantidad: 1, montoUnitario: 15000, estado: \"pendiente\", creadoEn: new Date() },\n        { clienteId: res1.insertedIds[\"1\"], servicioId: res3.insertedIds[\"1\"], fecha: new Date().toISOString(), cantidad: 1, montoUnitario: 25000, estado: \"pagado\", creadoEn: new Date() },\n      ];\n      await db.collection(\"cobros\").insertMany(cobros as any);\n\n      res.json({ ok: true });\n    } catch (e: any) {\n      res.status(500).json({ error: e.message });\n    }\n  });\n\n  return app;\n}\n\nexport function createServer() {\n  // create server without starting listener â€” used by Vite dev server\n  return setupApp();\n}\n\nasync function start() {\n  await connectDB();\n  const port = Number(process.env.PORT || 4000);\n  const app = setupApp();\n  app.listen(port, () => console.log(\"Server listening on port\", port));\n}\n\nif (process.env.NODE_ENV !== \"test\" && process.env.RUN_SERVER !== \"false\") {\n  start();\n}\n\nexport default setupApp();\n","import path from \"path\";\nimport { createServer } from \"./index\";\nimport * as express from \"express\";\n\nconst app = createServer();\nconst port = process.env.PORT || 3000;\n\n// In production, serve the built SPA files\nconst __dirname = import.meta.dirname;\nconst distPath = path.join(__dirname, \"../spa\");\n\n// Serve static files\napp.use(express.static(distPath));\n\n// Handle React Router - serve index.html for all non-API routes\napp.get(\"*\", (req, res) => {\n  // Don't serve index.html for API routes\n  if (req.path.startsWith(\"/api/\") || req.path.startsWith(\"/health\")) {\n    return res.status(404).json({ error: \"API endpoint not found\" });\n  }\n\n  res.sendFile(path.join(distPath, \"index.html\"));\n});\n\napp.listen(port, () => {\n  console.log(`ðŸš€ Fusion Starter server running on port ${port}`);\n  console.log(`ðŸ“± Frontend: http://localhost:${port}`);\n  console.log(`ðŸ”§ API: http://localhost:${port}/api`);\n});\n\n// Graceful shutdown\nprocess.on(\"SIGTERM\", () => {\n  console.log(\"ðŸ›‘ Received SIGTERM, shutting down gracefully\");\n  process.exit(0);\n});\n\nprocess.on(\"SIGINT\", () => {\n  console.log(\"ðŸ›‘ Received SIGINT, shutting down gracefully\");\n  process.exit(0);\n});\n"],"names":["router","db","app","express","authRouter","clientesRouter","mascotasRouter","serviciosRouter","cobrosRouter","recordatoriosRouter","reportsRouter","testMailRouter","port"],"mappings":"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"}